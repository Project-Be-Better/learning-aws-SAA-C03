# Day 1 - August 1, 2025

## Today's Goals

- [x] Set up containerized AWS dev environment
- [x] Configure AWS CLI and credentials
- [x] Resolve DevContainer bootstrap issues
- [ ] Review AWS fundamentals overview

## Topics Studied

### AWS Development Environment Setup

- Dev Containers using `devcontainer.json` and Docker
- Installing and verifying:
  - AWS CLI v2
  - Terraform
  - AWS CDK v2
  - Python + `boto3`
- Setting up custom post-create bootstrap scripts

### AWS CLI Credential Management

- Comparison of environment variable vs file-based config
- `~/.aws/credentials` and `~/.aws/config` file formats
- Use of `aws configure` and related errors

### Git & Project Workflow

- Strategy to treat setup branch as base template
- Renaming Git branches
- Pull request strategy for syncing config updates to `main`

## Hands-On Work

### Environment Configuration

- Created `.devcontainer/bootstrap.sh` with:

  - `pip install boto3`
  - `npm install -g aws-cdk@2`
  - AWS CLI version checks
  - `aws sts get-caller-identity` for verification

- **Resolved errors:**

  - `set: invalid option` due to incorrect shell execution
  - `$'\r': command not found` due to Windows line endings
  - `Unknown output type: default` from `aws configure` misconfiguration

- âœ… Final solution:
  - Converted line endings using `dos2unix bootstrap.sh`
  - Updated `bootstrap.sh` to use proper `#!/bin/bash` and `set -e`
  - Verified credentials successfully via `aws sts get-caller-identity`

### Git Workflow Decisions

- Plan to maintain setup and tutorial branches separately
- Use `setup` branch as template config for future tutorial branches
- Create pull requests to merge setup updates to `main` after validation

## Key Learnings

- **Windows line endings (`\r\n`) cause errors in Linux containers**
  - Resolved by running `dos2unix` on `.sh` files
- **`aws configure`** output format must be valid (`json`, `table`, or `text`)
  - `default` is **not** a valid format
- **VS Code DevContainers** can mount local AWS config into containers using:
  ```json
  "mounts": ["source=${env:USERPROFILE}\\.aws,target=/root/.aws,type=bind"]
  ```

* **postCreateCommand** is useful but needs `&&` chaining for multiple commands
* **IAM credentials setup** can be done via:

  - Environment variables (ephemeral, CI-friendly)
  - `~/.aws/credentials` file (persistent, preferred for dev)

* Git branching strategy can mimic repo modularity for different setups

## Questions/Challenges

- Clarify differences in GitHub Codespaces vs DevContainer local mounts
- Explore AWS SSO and credential process integration
- Investigate using roles and profiles instead of static credentials

## Resources Used

- [AWS CLI Configuration Docs](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html)
- [Dev Container Documentation](https://containers.dev/)
- [boto3 Installation](https://boto3.amazonaws.com/v1/documentation/api/latest/guide/quickstart.html)
- [dos2unix tool](https://linux.die.net/man/1/dos2unix)
- GitHub Copilot suggestions for `.aws/config` format

## Time Spent

- **DevContainer Setup & Debugging:** 2.5 hours
- **AWS CLI Credential Fixes & Testing:** 1 hour
- **Script Debugging & Bootstrap Automation:** 1 hour
- **Total:** 4.5 hours

## Tomorrow's Plan

- Complete AWS fundamentals review
- Start IAM deep dive (users, groups, policies, roles)
- Begin VPC networking concepts (subnets, route tables, IGW)
- Improve CDK usage in container

```

```
